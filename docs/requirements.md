# e-commerce 요구사항 명세서

## 공통 조건
- 회원, 회원 포인트는 미리 등록되어 있다.

---

## 1. 상품

### 기능
- **상품 정보 조회**: 상품 상세 정보를 조회한다.
- **상품 재고 조회**: 상품 실시간 재고를 조회한다.
- **인기 상품 통계 조회**: 최근 N일 기준 판매량 or 조회수 기반 topX 인기 상품을 조회
- **상품 조회수 증가**: 상품 조회 시 조회수를 증가시킨다.

### 조건
- 상품은 옵션이 없고 단일 상품이다.
- 상품 등록은 이미 되어있다고 가정한다.
- 인기 상품 조회 시 type(SALES/VIEWS), days, limit 파라미터로 조회 조건을 지정할 수 있다.

---

## 2. 장바구니

### 기능
- **장바구니 상품 목록 조회**: 장바구니에 담긴 상품 목록을 조회한다.
- **장바구니 상품 등록**: 장바구니에 상품을 등록한다.
- **장바구니 상품 삭제**: 장바구니에서 상품을 삭제한다.

### 조건
- 수량 변동 시에는 상품 삭제 후 재등록한다.

---

## 3. 주문/결제

### 기능
- **주문 생성**: 주문서 작성 완료 후 주문을 생성한다.
- **결제**: 포인트 결제를 진행한다.

### 조건
- 장바구니에 담긴 상품만 주문이 가능하다.
- 장바구니가 비어있으면 주문이 불가하다.
- 주문 생성 시 재고가 부족하면 주문이 불가하다.
- 주문 중 쿠폰 사용 시 유효한 쿠폰이 아니면 주문이 불가하다.
- 결제는 회원이 보유한 포인트 차감으로 진행한다.
- 포인트 부족 시 결제가 실패한다.
- 결제 완료 후 주문한 상품은 장바구니에서 제거한다.

---

## 4. 쿠폰

### 기능
- **쿠폰 정보 목록 조회**: 쿠폰 정보 목록을 조회한다.
- **쿠폰 발급**: 선착순으로 쿠폰을 발급받는다.
- **쿠폰 사용 이력 조회**: 발급 쿠폰 별 사용한 이력을 조회한다.

### 조건
- 발급될 선착순 쿠폰은 미리 등록되어있다.
- 동일 쿠폰 중복 발급은 불가하다.
- 쿠폰은 만료일(expiredAt)을 가지며, 만료된 쿠폰은 발급 및 사용이 불가하다.
- 주문 생성 시 쿠폰을 사용하려면 해당 쿠폰이 사용자에게 발급된 상태여야 한다.
- 쿠폰 사용 시 발급 여부, 사용 여부, 만료 여부를 검증한다.